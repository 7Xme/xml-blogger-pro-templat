<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image Generator</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .generator-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .prompt-section {
            margin-bottom: 30px;
        }
        .prompt-group {
            margin-bottom: 20px;
        }
        .prompt-group label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }
        .prompt-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Poppins', sans-serif;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        .prompt-input:focus {
            outline: none;
            border-color: #dc143c;
        }
        .options-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .option-group {
            margin-bottom: 20px;
        }
        .option-group h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
        }
        .control-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .control-group label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }
        .control-group select, .control-group input {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        .control-group select:focus, .control-group input:focus {
            outline: none;
            border-color: #dc143c;
        }
        .style-presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        .preset-btn {
            background: white;
            border: 2px solid #e9ecef;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
        }
        .preset-btn:hover {
            border-color: #dc143c;
            background: #fff5f5;
        }
        .preset-btn.active {
            background: #dc143c;
            color: white;
            border-color: #dc143c;
        }
        .generate-btn {
            background: #dc143c;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
        }
        .generate-btn:hover {
            background: #b22222;
            transform: scale(1.05);
        }
        .generate-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .progress-container {
            margin-top: 20px;
            display: none;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #dc143c, #ff6b6b);
            width: 0%;
            transition: width 0.3s ease;
        }
        .result-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-top: 30px;
            display: none;
        }
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .result-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }
        .generation-info {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: #666;
            flex-wrap: wrap;
        }
        .generated-image {
            text-align: center;
            margin-bottom: 20px;
        }
        .image-preview {
            max-width: 100%;
            max-height: 500px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            display: none;
        }
        .image-placeholder {
            width: 400px;
            height: 400px;
            background: #f0f0f0;
            border: 3px dashed #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 48px;
            margin: 0 auto;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .download-btn, .regenerate-btn, .share-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.3s ease;
        }
        .download-btn:hover, .regenerate-btn:hover, .share-btn:hover {
            background: #218838;
        }
        .regenerate-btn {
            background: #17a2b8;
        }
        .regenerate-btn:hover {
            background: #138496;
        }
        .api-setup {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .api-title {
            color: #856404;
            font-weight: 600;
            margin-bottom: 10px;
        }
        .api-text {
            color: #856404;
            margin-bottom: 15px;
        }
        .api-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .save-api-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .save-api-btn:hover {
            background: #218838;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.info {
            background: #cce7ff;
            color: #004085;
            border: 1px solid #b3d7ff;
        }
        .examples-section {
            background: #e9ecef;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .examples-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }
        .example-prompts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        .example-btn {
            background: white;
            border: 1px solid #ddd;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            text-align: left;
            transition: all 0.3s ease;
        }
        .example-btn:hover {
            background: #f8f9fa;
            border-color: #dc143c;
        }
        @media (max-width: 768px) {
            .generator-container {
                padding: 20px;
            }
            .control-row {
                grid-template-columns: 1fr;
            }
            .style-presets {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            .generation-info {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="generator-container">
        <h1>🎨 AI Image Generator</h1>

        <div class="examples-section">
            <div class="examples-title">Quick Examples:</div>
            <div class="example-prompts">
                <button class="example-btn" onclick="loadExample('sunset')">🌅 A beautiful sunset over mountains</button>
                <button class="example-btn" onclick="loadExample('robot')">🤖 A friendly robot in a garden</button>
                <button class="example-btn" onclick="loadExample('space')">🚀 Astronaut on alien planet</button>
                <button class="example-btn" onclick="loadExample('fantasy')">🏰 Magical castle in clouds</button>
                <button class="example-btn" onclick="loadExample('animal')">🦁 Cute animal portrait</button>
                <button class="example-btn" onclick="loadExample('food')">🍕 Delicious gourmet dish</button>
            </div>
        </div>

        <div class="api-setup">
            <div class="api-title">🔑 API Setup Required</div>
            <div class="api-text">
                To use this tool, you need an API key from one of the supported image generation services.
                Choose your preferred service and enter your API key below.
            </div>
            <select id="apiService" class="api-input">
                <option value="openai">OpenAI DALL-E (Recommended)</option>
                <option value="stability">Stability AI</option>
                <option value="replicate">Replicate (Various models)</option>
            </select>
            <input type="password" id="apiKey" class="api-input" placeholder="Enter your API key here..." />
            <button class="save-api-btn" onclick="saveApiKey()">Save API Key</button>
            <div style="margin-top: 10px; font-size: 12px; color: #666;">
                🔒 Your API key is stored locally in your browser and never sent to our servers.
            </div>
        </div>

        <div class="prompt-section">
            <div class="prompt-group">
                <label for="imagePrompt">Describe the image you want to generate</label>
                <textarea class="prompt-input" id="imagePrompt" placeholder="e.g., A majestic lion standing on a cliff at sunset, detailed fur, dramatic lighting, photorealistic style..."></textarea>
            </div>
        </div>

        <div class="options-section">
            <div class="option-group">
                <h3>Generation Settings</h3>
                <div class="control-row">
                    <div class="control-group">
                        <label for="imageSize">Image Size</label>
                        <select id="imageSize">
                            <option value="256x256">256×256 (Fast)</option>
                            <option value="512x512" selected>512×512 (Standard)</option>
                            <option value="1024x1024">1024×1024 (High Quality)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="style">Art Style</label>
                        <select id="style">
                            <option value="natural" selected>Natural/Photorealistic</option>
                            <option value="artistic">Artistic/Painting</option>
                            <option value="digital">Digital Art</option>
                            <option value="anime">Anime/Manga</option>
                            <option value="cartoon">Cartoon/Illustrated</option>
                            <option value="abstract">Abstract/Modern</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="quality">Quality Level</label>
                        <select id="quality">
                            <option value="standard" selected>Standard</option>
                            <option value="hd">High Definition</option>
                            <option value="ultra">Ultra Quality</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="option-group">
                <h3>Style Presets</h3>
                <div class="style-presets">
                    <button class="preset-btn" onclick="applyStyle('photorealistic')">📸 Photorealistic</button>
                    <button class="preset-btn" onclick="applyStyle('digital-art')">🎨 Digital Art</button>
                    <button class="preset-btn" onclick="applyStyle('oil-painting')">🖼️ Oil Painting</button>
                    <button class="preset-btn" onclick="applyStyle('watercolor')">🎭 Watercolor</button>
                    <button class="preset-btn" onclick="applyStyle('cyberpunk')">🤖 Cyberpunk</button>
                    <button class="preset-btn" onclick="applyStyle('minimalist')">⚪ Minimalist</button>
                    <button class="preset-btn" onclick="applyStyle('vintage')">📻 Vintage</button>
                    <button class="preset-btn" onclick="applyStyle('fantasy')">🧙‍♂️ Fantasy</button>
                </div>
            </div>
        </div>

        <button class="generate-btn" id="generateBtn" onclick="generateImage()">🎨 Generate Image</button>

        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div style="text-align: center; margin-top: 10px; color: #666;" id="progressText">AI is creating your image...</div>
        </div>

        <div class="result-section" id="resultSection">
            <div class="result-header">
                <div class="result-title">Generated Image</div>
                <div class="generation-info">
                    <span id="genTime">Generated in 5.2s</span>
                    <span id="imageSize">512×512</span>
                    <span id="aiModel">DALL-E 3</span>
                </div>
            </div>

            <div class="generated-image">
                <div class="image-placeholder" id="imagePlaceholder">
                    <i class="fas fa-image"></i>
                </div>
                <img class="image-preview" id="generatedImage" alt="Generated Image" />
            </div>

            <div class="action-buttons">
                <button class="download-btn" onclick="downloadImage()">💾 Download Image</button>
                <button class="regenerate-btn" onclick="regenerateImage()">🔄 Regenerate</button>
                <button class="share-btn" onclick="shareImage()">📤 Share</button>
            </div>
        </div>

        <div class="status" id="status"></div>
    </div>

    <script>
        let generatedImageUrl = '';
        let lastPrompt = '';
        let apiKey = '';
        let apiService = 'openai';

        // Load saved API key on page load
        window.addEventListener('load', function() {
            loadSavedSettings();
        });

        function loadExample(type) {
            const examples = {
                sunset: "A breathtaking sunset over the ocean with vibrant orange and pink colors, gentle waves, palm trees silhouetted against the sky, highly detailed, photorealistic",
                robot: "A friendly robot with a smiling face, made of shiny metal, standing in a beautiful flower garden, surrounded by colorful butterflies, warm sunlight, digital art style",
                space: "An astronaut in a white spacesuit exploring a strange alien planet with purple rocks and two moons in the sky, detailed textures, cinematic lighting, photorealistic",
                fantasy: "A magnificent castle floating in the clouds, made of crystal and gold, with waterfalls flowing from towers, magical glowing runes, fantasy art style",
                animal: "A cute baby elephant with big expressive eyes, standing in a field of wildflowers, soft morning light, highly detailed fur, adorable expression, photorealistic",
                food: "A gourmet meal of perfectly cooked steak with herbs, roasted vegetables, and red wine in a fine restaurant, steam rising, dramatic lighting, photorealistic"
            };

            document.getElementById('imagePrompt').value = examples[type];
            showStatus(`Loaded ${type} example. Click "Generate Image" to create it!`, 'info');
        }

        function applyStyle(style) {
            // Reset all preset buttons
            document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));

            // Set the clicked button as active
            event.target.classList.add('active');

            const styles = {
                'photorealistic': 'highly detailed, photorealistic, 8k resolution, professional photography',
                'digital-art': 'digital art, vibrant colors, detailed illustration, modern style',
                'oil-painting': 'oil painting, classical art style, textured canvas, masterpiece',
                'watercolor': 'watercolor painting, soft colors, artistic, flowing brushstrokes',
                'cyberpunk': 'cyberpunk style, neon lights, futuristic, high tech, dark atmosphere',
                'minimalist': 'minimalist design, clean lines, simple composition, modern aesthetic',
                'vintage': 'vintage photography, retro style, faded colors, nostalgic feeling',
                'fantasy': 'fantasy art, magical elements, enchanted atmosphere, mythical creatures'
            };

            const currentPrompt = document.getElementById('imagePrompt').value.trim();
            if (currentPrompt && !currentPrompt.includes(styles[style])) {
                document.getElementById('imagePrompt').value = currentPrompt + ', ' + styles[style];
            }
        }

        function saveApiKey() {
            const service = document.getElementById('apiService').value;
            const key = document.getElementById('apiKey').value.trim();

            if (!key) {
                showStatus('Please enter an API key.', 'error');
                return;
            }

            // Save to localStorage
            localStorage.setItem('aiImageGenerator_apiService', service);
            localStorage.setItem('aiImageGenerator_apiKey', key);

            apiService = service;
            apiKey = key;

            showStatus('API key saved successfully!', 'success');

            // Hide API setup after saving
            document.querySelector('.api-setup').style.display = 'none';
        }

        function loadSavedSettings() {
            const savedService = localStorage.getItem('aiImageGenerator_apiService');
            const savedKey = localStorage.getItem('aiImageGenerator_apiKey');

            if (savedService && savedKey) {
                apiService = savedService;
                apiKey = savedKey;

                document.getElementById('apiService').value = savedService;
                document.getElementById('apiKey').value = savedKey;

                // Hide API setup if key is saved
                document.querySelector('.api-setup').style.display = 'none';
            }
        }

        async function generateImage() {
            const prompt = document.getElementById('imagePrompt').value.trim();

            if (!prompt) {
                showStatus('Please enter a description for the image.', 'error');
                return;
            }

            if (!apiKey) {
                showStatus('Please set up your API key first.', 'error');
                document.querySelector('.api-setup').style.display = 'block';
                return;
            }

            if (prompt.length > 1000) {
                showStatus('Prompt is too long. Please limit to 1,000 characters.', 'error');
                return;
            }

            // Show processing
            progressContainer.style.display = 'block';
            progressFill.style.width = '0%';
            generateBtn.disabled = true;
            generateBtn.textContent = '🎨 Generating...';
            resultSection.style.display = 'none';

            lastPrompt = prompt;

            try {
                const imageSize = document.getElementById('imageSize').value;
                const style = document.getElementById('style').value;
                const quality = document.getElementById('quality').value;

                progressFill.style.width = '30%';
                progressText.textContent = 'Sending request to AI...';

                const result = await generateImageWithAPI(prompt, imageSize, style, quality);

                progressFill.style.width = '90%';
                progressText.textContent = 'Processing result...';

                generatedImageUrl = result.imageUrl;

                // Update UI with result
                displayGeneratedImage(result);

                progressFill.style.width = '100%';
                progressText.textContent = 'Image generated successfully!';

                setTimeout(() => {
                    progressContainer.style.display = 'none';
                    generateBtn.disabled = false;
                    generateBtn.textContent = '🎨 Generate Image';
                }, 500);

            } catch (error) {
                console.error('Image generation error:', error);
                progressContainer.style.display = 'none';
                showStatus('Error generating image: ' + error.message, 'error');
                generateBtn.disabled = false;
                generateBtn.textContent = '🎨 Generate Image';
            }
        }

        async function generateImageWithAPI(prompt, size, style, quality) {
            const enhancedPrompt = enhancePrompt(prompt, style, quality);

            switch(apiService) {
                case 'openai':
                    return await generateWithOpenAI(enhancedPrompt, size);
                case 'stability':
                    return await generateWithStability(enhancedPrompt, size);
                case 'replicate':
                    return await generateWithReplicate(enhancedPrompt, size);
                default:
                    throw new Error('Unsupported API service');
            }
        }

        function enhancePrompt(basePrompt, style, quality) {
            let enhanced = basePrompt;

            // Add style enhancements
            const styleEnhancements = {
                'natural': 'photorealistic, highly detailed, professional photography',
                'artistic': 'artistic, painterly style, creative interpretation',
                'digital': 'digital art, vibrant colors, modern illustration',
                'anime': 'anime style, manga art, Japanese animation',
                'cartoon': 'cartoon style, illustrated, fun and colorful',
                'abstract': 'abstract art, modern interpretation, artistic expression'
            };

            if (styleEnhancements[style]) {
                enhanced += ', ' + styleEnhancements[style];
            }

            // Add quality enhancements
            if (quality === 'hd') {
                enhanced += ', high definition, sharp focus, detailed';
            } else if (quality === 'ultra') {
                enhanced += ', ultra high resolution, masterpiece quality, extremely detailed';
            }

            return enhanced;
        }

        async function generateWithOpenAI(prompt, size) {
            const response = await fetch('https://api.openai.com/v1/images/generations', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    prompt: prompt,
                    n: 1,
                    size: size,
                    model: 'dall-e-3',
                    quality: 'standard',
                    style: 'vivid'
                })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.error?.message || 'OpenAI API error');
            }

            const data = await response.json();
            return {
                imageUrl: data.data[0].url,
                model: 'DALL-E 3',
                service: 'OpenAI'
            };
        }

        async function generateWithStability(prompt, size) {
            // This is a simplified example - actual Stability AI API may vary
            const [width, height] = size.split('x').map(Number);

            const response = await fetch('https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/text-to-image', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    text_prompts: [{ text: prompt }],
                    cfg_scale: 7,
                    width: width,
                    height: height,
                    samples: 1,
                    steps: 30
                })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.message || 'Stability AI API error');
            }

            const data = await response.json();
            return {
                imageUrl: `data:image/png;base64,${data.artifacts[0].base64}`,
                model: 'Stable Diffusion XL',
                service: 'Stability AI'
            };
        }

        async function generateWithReplicate(prompt, size) {
            // This is a simplified example - actual Replicate API may vary
            const response = await fetch('https://api.replicate.com/v1/predictions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Token ${apiKey}`
                },
                body: JSON.stringify({
                    version: "stability-ai/sdxl:7762fd07cf82c948538e41f63f77d685e02b063e37e496e96eefd46c929f9bdc",
                    input: {
                        prompt: prompt,
                        width: parseInt(size.split('x')[0]),
                        height: parseInt(size.split('x')[1]),
                        num_inference_steps: 25
                    }
                })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.message || 'Replicate API error');
            }

            const data = await response.json();

            // Wait for completion (simplified - in real implementation you'd poll the prediction)
            // For demo purposes, we'll assume it completes immediately
            if (data.output && data.output[0]) {
                return {
                    imageUrl: data.output[0],
                    model: 'SDXL via Replicate',
                    service: 'Replicate'
                };
            } else {
                throw new Error('Image generation failed');
            }
        }

        function displayGeneratedImage(result) {
            const imageElement = document.getElementById('generatedImage');
            const placeholder = document.getElementById('imagePlaceholder');

            imageElement.src = result.imageUrl;
            imageElement.style.display = 'block';
            placeholder.style.display = 'none';

            // Update generation info
            document.getElementById('genTime').textContent = `Generated just now`;
            document.getElementById('imageSize').textContent = document.getElementById('imageSize').value;
            document.getElementById('aiModel').textContent = result.model;

            resultSection.style.display = 'block';

            showStatus(`✅ Image generated successfully using ${result.service}!`, 'success');
        }

        function downloadImage() {
            if (!generatedImageUrl) {
                showStatus('No image to download.', 'error');
                return;
            }

            const link = document.createElement('a');
            link.href = generatedImageUrl;
            link.download = `ai-generated-image-${Date.now()}.png`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            showStatus('Image downloaded successfully!', 'success');
        }

        function regenerateImage() {
            if (lastPrompt) {
                document.getElementById('imagePrompt').value = lastPrompt;
                generateImage();
            } else {
                showStatus('No previous prompt to regenerate.', 'error');
            }
        }

        function shareImage() {
            if (!generatedImageUrl) {
                showStatus('No image to share.', 'error');
                return;
            }

            if (navigator.share) {
                navigator.share({
                    title: 'AI Generated Image',
                    text: 'Check out this image I generated with AI!',
                    url: generatedImageUrl
                });
            } else {
                // Fallback: copy URL to clipboard
                navigator.clipboard.writeText(generatedImageUrl).then(() => {
                    showStatus('Image URL copied to clipboard!', 'success');
                });
            }
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';

            // Keep error messages visible longer
            if (type === 'error') {
                setTimeout(() => {
                    if (statusDiv.classList.contains('error')) {
                        statusDiv.style.display = 'none';
                    }
                }, 8000);
            } else {
                setTimeout(() => {
                    statusDiv.style.display = 'none';
                }, 5000);
            }
        }
    </script>
</body>
</html>