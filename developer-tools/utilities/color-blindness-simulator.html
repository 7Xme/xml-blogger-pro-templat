<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Blindness Simulator</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .simulator-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .upload-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .upload-area {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 40px;
            margin-bottom: 20px;
            transition: border-color 0.3s ease;
        }
        .upload-area:hover {
            border-color: #dc143c;
        }
        .upload-area.dragover {
            border-color: #dc143c;
            background: #ffeaea;
        }
        input[type="file"] {
            display: none;
        }
        .upload-btn {
            background: #dc143c;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .upload-btn:hover {
            background: #b22222;
            transform: scale(1.05);
        }
        .sample-images {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .sample-img {
            width: 100px;
            height: 60px;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .sample-img:hover {
            transform: scale(1.05);
        }
        .comparison-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        .image-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        .image-panel h3 {
            margin-top: 0;
            color: #333;
            text-align: center;
        }
        .image-container {
            position: relative;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .simulated-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .filter-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .filter-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }
        .filter-btn.active {
            background: #dc143c;
        }
        .filter-btn:hover {
            background: #5a6268;
        }
        .info-section {
            background: #e9ecef;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .info-section h3 {
            margin-top: 0;
            color: #333;
        }
        .info-section p {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        @media (max-width: 768px) {
            .simulator-container {
                padding: 20px;
            }
            .comparison-section {
                grid-template-columns: 1fr;
            }
            .filter-selector {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="simulator-container">
        <h1>Color Blindness Simulator</h1>

        <div class="upload-section">
            <div class="upload-area" id="uploadArea">
                <p>Drag & drop an image here or click to browse</p>
                <input type="file" id="imageInput" accept="image/*">
                <br><br>
                <button class="upload-btn" onclick="document.getElementById('imageInput').click()">Choose Image</button>
            </div>

            <p>Or try with sample images:</p>
            <div class="sample-images">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 60'><rect width='100' height='60' fill='%23ff0000'/><circle cx='25' cy='30' r='15' fill='%2300ff00'/><circle cx='75' cy='30' r='15' fill='%230000ff'/></svg>" class="sample-img" onclick="loadSample(0)" alt="Sample 1">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 60'><rect width='100' height='60' fill='%23ffffff'/><text x='50' y='35' text-anchor='middle' fill='%23000000' font-size='12'>Test Text</text><rect x='10' y='10' width='20' height='20' fill='%23ff4444'/><rect x='40' y='10' width='20' height='20' fill='%2344ff44'/><rect x='70' y='10' width='20' height='20' fill='%234444ff'/></svg>" class="sample-img" onclick="loadSample(1)" alt="Sample 2">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 60'><defs><linearGradient id='grad' x1='0%' y1='0%' x2='100%' y2='0%'><stop offset='0%' style='stop-color:%23ff0000'/><stop offset='50%' style='stop-color:%2300ff00'/><stop offset='100%' style='stop-color:%230000ff'/></linearGradient></defs><rect width='100' height='60' fill='url(%23grad)'/></svg>" class="sample-img" onclick="loadSample(2)" alt="Sample 3">
            </div>
        </div>

        <div class="comparison-section">
            <div class="image-panel">
                <h3>Original</h3>
                <div class="image-container">
                    <img id="originalImage" class="simulated-image" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 200'><rect width='300' height='200' fill='%23f8f9fa'/><text x='150' y='100' text-anchor='middle' fill='%23666'>Upload an image to begin</text></svg>" alt="Original">
                </div>
            </div>

            <div class="image-panel">
                <h3>Color Blind Simulation</h3>
                <div class="filter-selector">
                    <button class="filter-btn active" onclick="setFilter('normal')">Normal</button>
                    <button class="filter-btn" onclick="setFilter('protanopia')">Protanopia</button>
                    <button class="filter-btn" onclick="setFilter('deuteranopia')">Deuteranopia</button>
                    <button class="filter-btn" onclick="setFilter('tritanopia')">Tritanopia</button>
                    <button class="filter-btn" onclick="setFilter('achromatopsia')">Achromatopsia</button>
                </div>
                <div class="image-container">
                    <img id="simulatedImage" class="simulated-image" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 200'><rect width='300' height='200' fill='%23f8f9fa'/><text x='150' y='100' text-anchor='middle' fill='%23666'>Upload an image to begin</text></svg>" alt="Simulated">
                </div>
            </div>
        </div>

        <div class="info-section" id="filterInfo">
            <h3>About Normal Vision</h3>
            <p>This shows how the image appears to people with normal color vision. Use this as a reference when comparing with the simulated views.</p>
        </div>
    </div>

    <svg style="position: absolute; width: 0; height: 0;">
        <defs>
            <filter id="protanopia" color-interpolation-filters="sRGB">
                <feColorMatrix type="matrix" values="0.567 0.433 0 0 0  0.558 0.442 0 0 0  0 0.242 0.758 0 0  0 0 0 1 0"/>
            </filter>
            <filter id="deuteranopia" color-interpolation-filters="sRGB">
                <feColorMatrix type="matrix" values="0.625 0.375 0 0 0  0.7 0.3 0 0 0  0 0.3 0.7 0 0  0 0 0 1 0"/>
            </filter>
            <filter id="tritanopia" color-interpolation-filters="sRGB">
                <feColorMatrix type="matrix" values="0.95 0.05 0 0 0  0 0.433 0.567 0 0  0 0.475 0.525 0 0  0 0 0 1 0"/>
            </filter>
            <filter id="achromatopsia" color-interpolation-filters="sRGB">
                <feColorMatrix type="matrix" values="0.299 0.587 0.114 0 0  0.299 0.587 0.114 0 0  0.299 0.587 0.114 0 0  0 0 0 1 0"/>
            </filter>
        </defs>
    </svg>

    <script>
        const uploadArea = document.getElementById('uploadArea');
        const imageInput = document.getElementById('imageInput');
        const originalImage = document.getElementById('originalImage');
        const simulatedImage = document.getElementById('simulatedImage');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const filterInfo = document.getElementById('filterInfo');

        let currentFilter = 'normal';
        let currentImageSrc = '';

        // Drag and drop functionality
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            uploadArea.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, unhighlight, false);
        });

        function highlight(e) {
            uploadArea.classList.add('dragover');
        }

        function unhighlight(e) {
            uploadArea.classList.remove('dragover');
        }

        uploadArea.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;

            handleFiles(files);
        }

        imageInput.addEventListener('change', function(e) {
            handleFiles(e.target.files);
        });

        function handleFiles(files) {
            if (files.length > 0) {
                const file = files[0];
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        currentImageSrc = e.target.result;
                        originalImage.src = currentImageSrc;
                        simulatedImage.src = currentImageSrc;
                        applyFilter(currentFilter);
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        function loadSample(index) {
            const samples = [
                "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 200'><rect width='300' height='200' fill='%23ffebcd'/><circle cx='75' cy='100' r='40' fill='%23ff0000'/><circle cx='150' cy='100' r='40' fill='%2300ff00'/><circle cx='225' cy='100' r='40' fill='%230000ff'/><text x='150' y='170' text-anchor='middle' fill='%23000000' font-size='14'>Color Test</text></svg>",
                "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 200'><rect width='300' height='200' fill='%23ffffff'/><text x='150' y='50' text-anchor='middle' fill='%23ff0000' font-size='20'>Red Text</text><text x='150' y='80' text-anchor='middle' fill='%2300ff00' font-size='20'>Green Text</text><text x='150' y='110' text-anchor='middle' fill='%230000ff' font-size='20'>Blue Text</text><rect x='50' y='130' width='40' height='30' fill='%23ff4444'/><rect x='130' y='130' width='40' height='30' fill='%2344ff44'/><rect x='210' y='130' width='40' height='30' fill='%234444ff'/></svg>",
                "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 200'><defs><linearGradient id='grad1' x1='0%' y1='0%' x2='100%' y2='0%'><stop offset='0%' style='stop-color:%23ff0000'/><stop offset='33%' style='stop-color:%2300ff00'/><stop offset='66%' style='stop-color:%230000ff'/><stop offset='100%' style='stop-color:%23ff0000'/></linearGradient><radialGradient id='grad2' cx='50%' cy='50%' r='50%'><stop offset='0%' style='stop-color:%23ffffff'/><stop offset='100%' style='stop-color:%23000000'/></radialGradient></defs><rect width='300' height='100' fill='url(%23grad1)'/><rect x='0' y='100' width='300' height='100' fill='url(%23grad2)'/></svg>"
            ];

            currentImageSrc = samples[index];
            originalImage.src = currentImageSrc;
            simulatedImage.src = currentImageSrc;
            applyFilter(currentFilter);
        }

        function setFilter(filterType) {
            currentFilter = filterType;

            // Update button states
            filterButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            applyFilter(filterType);
            updateFilterInfo(filterType);
        }

        function applyFilter(filterType) {
            if (filterType === 'normal') {
                simulatedImage.style.filter = 'none';
            } else {
                simulatedImage.style.filter = `url(#${filterType})`;
            }
        }

        function updateFilterInfo(filterType) {
            const info = {
                normal: {
                    title: "Normal Vision",
                    description: "This shows how the image appears to people with normal color vision. Use this as a reference when comparing with the simulated views."
                },
                protanopia: {
                    title: "Protanopia (Red-Blind)",
                    description: "A type of color blindness where the person cannot distinguish between red and green colors. Reds appear as dark green or black, and greens appear as lighter green or yellow."
                },
                deuteranopia: {
                    title: "Deuteranopia (Green-Blind)",
                    description: "The most common type of color blindness where greens are indistinguishable from reds. People with deuteranopia may confuse blues and purples."
                },
                tritanopia: {
                    title: "Tritanopia (Blue-Blind)",
                    description: "A rare form of color blindness where blue colors are difficult to distinguish from green and red. Blues appear as green or purple."
                },
                achromatopsia: {
                    title: "Achromatopsia (Total Color Blindness)",
                    description: "A rare condition where a person sees only in shades of gray. All colors are perceived as different shades of gray."
                }
            };

            const currentInfo = info[filterType];
            filterInfo.innerHTML = `
                <h3>${currentInfo.title}</h3>
                <p>${currentInfo.description}</p>
            `;
        }

        // Initialize with normal vision info
        updateFilterInfo('normal');
    </script>
</body>
</html>